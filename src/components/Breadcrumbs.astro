---
export interface BreadcrumbItem {
  name: string;
  url?: string;
}

export interface Props {
  items: BreadcrumbItem[];
}

const { items } = Astro.props;
---

<nav aria-label="Breadcrumb" class="breadcrumb-nav">
  <ol class="breadcrumb-list">
    <li class="breadcrumb-item">
      <a href="/" class="breadcrumb-link">
        <svg class="home-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span class="sr-only">Home</span>
      </a>
    </li>
    {items.map((item, index) => {
      const isLast = index === items.length - 1;
      return (
        <li class="breadcrumb-item">
          <svg class="breadcrumb-separator" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
          {isLast ? (
            <span class="breadcrumb-current" aria-current="page">{item.name}</span>
          ) : (
            <a href={item.url} class="breadcrumb-link">{item.name}</a>
          )}
        </li>
      );
    })}
  </ol>
</nav>

<style>
  .breadcrumb-nav {
    margin: 1rem 0 2rem 0;
    padding: 0.75rem 1rem;
    background: var(--background-alt);
    border-radius: 8px;
  }

  .breadcrumb-list {
    display: flex;
    align-items: center;
    list-style: none;
    margin: 0;
    padding: 0;
    flex-wrap: wrap;
  }

  .breadcrumb-item {
    display: flex;
    align-items: center;
    font-size: 0.9rem;
  }

  .breadcrumb-link {
    color: var(--text-light);
    text-decoration: none;
    transition: color 0.2s ease;
    display: flex;
    align-items: center;
  }

  .breadcrumb-link:hover {
    color: var(--primary-color);
  }

  .home-icon {
    width: 18px;
    height: 18px;
  }

  .breadcrumb-separator {
    margin: 0 0.5rem;
    color: var(--text-light);
    opacity: 0.5;
  }

  .breadcrumb-current {
    color: var(--text-color);
    font-weight: 500;
  }

  html.dark .breadcrumb-nav {
    background: rgba(255, 255, 255, 0.05);
  }

  html.dark .breadcrumb-link {
    color: #9ca3af;
  }

  html.dark .breadcrumb-link:hover {
    color: var(--primary-color);
  }

  html.dark .breadcrumb-current {
    color: #f3f4f6;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  @media (max-width: 640px) {
    .breadcrumb-nav {
      padding: 0.5rem 0.75rem;
      margin: 0.75rem 0 1.5rem 0;
    }

    .breadcrumb-item {
      font-size: 0.85rem;
    }

    .breadcrumb-separator {
      margin: 0 0.25rem;
    }
  }
</style>